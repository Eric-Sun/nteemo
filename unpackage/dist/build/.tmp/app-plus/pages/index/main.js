(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/main"],{"0703":function(t,n,e){"use strict";e.r(n);var a=e("280f"),r=e("1dc9");for(var i in r)"default"!==i&&function(t){e.d(n,t,function(){return r[t]})}(i);e("f819");var o=e("2877"),s=Object(o["a"])(r["default"],a["a"],a["b"],!1,null,"0545a923",null);n["default"]=s.exports},"1dc9":function(t,n,e){"use strict";e.r(n);var a=e("7a8d"),r=e.n(a);for(var i in a)"default"!==i&&function(t){e.d(n,t,function(){return a[t]})}(i);n["default"]=r.a},"280f":function(t,n,e){"use strict";var a=function(){var t=this,n=t.$createElement,a=(t._self._c,e("a86f"));t.$mp.data=Object.assign({},{$root:{m0:a}})},r=[];e.d(n,"a",function(){return a}),e.d(n,"b",function(){return r})},"7a8d":function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=s(e("a34a")),r=e("faf3"),i=e("0d80"),o=e("fb86");function s(t){return t&&t.__esModule?t:{default:t}}function c(t){return d(t)||f(t)||u()}function u(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function f(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function d(t){if(Array.isArray(t)){for(var n=0,e=new Array(t.length);n<t.length;n++)e[n]=t[n];return e}}function l(t,n,e,a,r,i,o){try{var s=t[i](o),c=s.value}catch(u){return void e(u)}s.done?n(c):Promise.resolve(c).then(a,r)}function h(t){return function(){var n=this,e=arguments;return new Promise(function(a,r){var i=t.apply(n,e);function o(t){l(i,a,r,o,s,"next",t)}function s(t){l(i,a,r,o,s,"throw",t)}o(void 0)})}}var p=function(){return Promise.all([e.e("common/vendor"),e.e("components/card")]).then(e.bind(null,"668e"))},g=function(){return Promise.all([e.e("common/vendor"),e.e("components/login")]).then(e.bind(null,"6a4f"))},v=function(){return(0,o.debounce)(function(t){this.cursor=t.target.scrollTop})},m={data:function(){return{t:0,page:0,tab:"story",cardData:{story:[],diary:[]},isLoading:!1,list:["story","diary"],animation:{},visible:!1,cursor:0}},components:{card:p,login:g},onShow:function(){this.init()},onShareAppMessage:function(){return{title:"豆子社区",path:"/pages/index/index"}},methods:{onScroll:v(),refresh:function(){this.init(),this.cursor=0},init:function(){var t=this;this.t=wx.getStorageSync("t"),(0,i.checkT)(this.t,function(){wx.setStorageSync("t",0),t.t=0},function(){t.t=wx.getStorageSync("t")}),this.getData("story",0),this.cursor=0,this.page=0},closeModalEvent:function(){this.visible=!1,this.t=wx.getStorageSync("t"),this.getData("story",0)},getData:function(){var t=h(a.default.mark(function t(n,e){var i,o;return a.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return i=-1,i="story"==n?0:1,wx.showLoading({title:"加载中"}),this.isLoading=!0,t.next=6,this.$http.get("".concat(r.api),{act:"post.list",barId:"".concat(r.barId),pageNum:this.page,size:5,t:this.t,type:i});case 6:o=t.sent,wx.hideLoading(),0!=o.data.list.length?this.cardData[n].length>0&&0===e?this.cardData[n]=o.data.list:this.cardData[n]=[].concat(c(this.cardData[n]),c(o.data.list)):wx.showToast({title:"已经没有更新的数据了",icon:"none",duration:2e3}),o.data.noticeSize>0&&wx.setTabBarBadge({index:2,text:o.data.noticeSize+""}),this.isLoading=!1;case 11:case"end":return t.stop()}},t,this)}));function n(n,e){return t.apply(this,arguments)}return n}(),getMore:function(){var t=h(a.default.mark(function t(){return a.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(this.isLoading){t.next=4;break}return this.page+=1,t.next=4,this.getData(this.tab,this.page);case 4:case"end":return t.stop()}},t,this)}));function n(){return t.apply(this,arguments)}return n}(),onPullDownRefresh:function(){var t=h(a.default.mark(function t(){return a.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.getData(this.tab,0);case 2:wx.stopPullDownRefresh();case 3:case"end":return t.stop()}},t,this)}));function n(){return t.apply(this,arguments)}return n}(),changeTab:function(t){var n=t.target.dataset.tab,e=t.target.dataset.offset;this.tab=n,this.page=0,this.getData(n,0),this.animation=wx.createAnimation({duration:1e3,timingFunction:"ease"}).left("-".concat(100*e,"vw")).step().export()}}};n.default=m},d32f:function(t,n,e){},f819:function(t,n,e){"use strict";var a=e("d32f"),r=e.n(a);r.a}},[["5df4","common/runtime","common/vendor"]]]);